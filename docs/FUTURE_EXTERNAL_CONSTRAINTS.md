# 외부 제한사항 중 추후 trunk_rag 적용 항목

목적:
- 외부 전처리 파이프라인(클라우드 LLM 등)에서 먼저 관리할 제약을 정리한다.
- 그중 `trunk_rag`에 나중에 흡수할 항목을 우선순위로 구분한다.

운영 전제:
- 원본 소스 정제는 외부 단계에서 수행
- `trunk_rag`는 가이드 + 등록 검증 + 인덱싱/조회에 집중

## 1) 외부에서 우선 관리할 제한사항

1. 데이터 반출/보안
- 민감정보 포함 원문의 클라우드 전송 제한
- 비식별화/마스킹 정책 적용

2. 저작권/라이선스
- 원문 사용 권한 및 2차 가공 허용 범위 검증
- 출처/버전/라이선스 메타 관리

3. 전처리 품질
- 문체/표현 정규화
- 헤더/메타 규칙 준수 여부

4. 전처리 모델 거버넌스
- 사용 모델 버전 기록
- 프롬프트 변경 이력 관리

## 2) trunk_rag에 추후 적용할 항목 (후속 반영)

### 우선순위 A (가까운 시점)

1. 최소 거버넌스 메타 저장
- `preprocess_version`
- `source_license`
- `processed_at`

2. 등록 검증 강화
- 금지 패턴 검사(빈 섹션, 과도한 중복)
- 메타 누락 시 적재 차단

3. 판정 결과 표준화
- `usable=true/false`
- `reasons[]`
- `warnings[]`

### 우선순위 B (데이터 증가 시)

1. PII/민감정보 탐지 결과 반영
- 외부 탐지 결과를 메타로 받아 차단 여부 결정

2. 라이선스 정책 연동
- 라이선스 등급별 적재 허용/금지 룰

3. 추적성 강화
- 문서 단위 lineage(source -> preprocessed -> indexed) 기록

### 우선순위 C (고도화 단계)

1. 정책 위반 자동 리포트
2. 운영 대시보드(검증 실패율, 반려 사유 상위 항목)
3. 감사 로그 보존 정책

## 3) 적용 제외(현재)

현재 `trunk_rag`에 바로 넣지 않는 항목:
- 원본 자동 수집/크롤링
- 대규모 자동 재작성 파이프라인
- 멀티 테넌트 권한 모델

## 4) 실무 적용 원칙

1. 외부에서 해결 가능한 문제는 외부에서 해결
2. `trunk_rag`는 검증 게이트와 검색 품질에 집중
3. 기능 추가 전 항상 "경량 운영 원칙" 유지 여부를 먼저 판단
