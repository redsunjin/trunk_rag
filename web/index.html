<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>doc_rag local dashboard</title>
  <link rel="stylesheet" href="styles.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body class="light-theme">
  <div class="app-container">
    <div class="sidebar-overlay" id="sidebarOverlay"></div>

    <aside class="sidebar" id="sidebar">
      <div class="sidebar-header">
        <h2>Settings</h2>
        <button id="closeSidebar" class="close-btn">&times;</button>
      </div>
      <div class="sidebar-content">
        <div class="sidebar-section">
          <h3>LLM Configuration</h3>
          <div class="input-row">
            <div class="input-group">
              <label for="collection">Collection 1</label>
              <select id="collection">
                <option value="all" selected>전체 (기본)</option>
              </select>
            </div>
            <div class="input-group">
              <label for="collection2">Collection 2 (optional)</label>
              <select id="collection2">
                <option value="">사용 안 함</option>
              </select>
            </div>
          </div>
          <small id="collectionHint" class="helper-text">컬렉션 정보를 로딩 중입니다.</small>
          <div class="input-group">
            <label for="provider">LLM Provider</label>
            <select id="provider">
              <option value="ollama" selected>ollama</option>
              <option value="openai">openai</option>
              <option value="lmstudio">lmstudio</option>
            </select>
          </div>
          <div class="input-group">
            <label for="model">LLM Model</label>
            <input type="text" id="model" value="qwen3:4b">
          </div>
          <div class="input-group">
            <label for="baseUrl">Base URL (optional)</label>
            <input type="text" id="baseUrl" value="http://localhost:11434">
          </div>
          <div class="input-group">
            <label for="apiKey">API Key (optional)</label>
            <input type="password" id="apiKey" value="">
          </div>
        </div>

        <div class="sidebar-section">
          <h3>Health</h3>
          <div id="statusIndicator" class="status-indicator">
            <span class="status-dot"></span>
            <span class="status-text">Checking...</span>
          </div>
          <p id="statusMsg" class="status-msg">로컬 서버 상태를 확인 중입니다.</p>
          <div class="sidebar-actions">
            <button id="healthBtn" class="secondary-btn">Health Check</button>
            <button id="reindexBtn" class="primary-btn">Reindex</button>
          </div>
        </div>

        <div class="sidebar-section">
          <h3>RAG Documents</h3>
          <div class="doc-list" id="docList">
            <p class="status-msg">문서 목록 로딩 중...</p>
          </div>
        </div>

        <div class="sidebar-section">
          <h3>Upload Request</h3>
          <div class="input-group">
            <label for="uploadSource">Source Name</label>
            <input type="text" id="uploadSource" placeholder="example.md">
          </div>
          <div class="input-row">
            <div class="input-group">
              <label for="uploadCountry">Country</label>
              <select id="uploadCountry">
                <option value="">(collection 기본값)</option>
                <option value="all">all</option>
                <option value="france">france</option>
                <option value="germany">germany</option>
                <option value="italy">italy</option>
                <option value="uk">uk</option>
              </select>
            </div>
            <div class="input-group">
              <label for="uploadDocType">Doc Type</label>
              <select id="uploadDocType">
                <option value="">(collection 기본값)</option>
                <option value="summary">summary</option>
                <option value="country">country</option>
              </select>
            </div>
          </div>
          <div class="input-group">
            <label for="uploadContent">Markdown Content</label>
            <textarea id="uploadContent" rows="6" placeholder="## 제목&#10;본문 내용을 입력하세요."></textarea>
          </div>
          <div class="sidebar-actions">
            <button id="uploadBtn" class="primary-btn">업로드 요청</button>
          </div>
          <p id="uploadMsg" class="status-msg" style="margin-top:8px;"></p>
        </div>
      </div>
    </aside>

    <main class="main-content">
      <header class="main-header">
        <div class="header-left">
          <button id="menuToggle" class="menu-toggle">
            <span></span>
            <span></span>
            <span></span>
          </button>
          <h1>Trunk RAG : Chatbot</h1>
        </div>
      </header>

      <section class="chat-layout">
        <div class="main-chat-container" id="chatContainer">
          <div class="chat-message bot">
            안녕하세요. 문서 기반 RAG 어시스턴트입니다. 질문을 입력해 주세요.
          </div>
        </div>
        <div class="main-chat-input">
          <textarea id="userInput" rows="2" placeholder="질문을 입력하세요..."></textarea>
          <button id="sendBtn" class="primary-btn">Send</button>
        </div>
      </section>

      <section class="doc-viewer-layout">
        <div class="card">
          <h3 id="docTitle">Document Viewer</h3>
          <div class="doc-viewer-body" id="docViewer">
            <p class="status-msg">왼쪽 문서 목록에서 파일을 선택하면 내용을 볼 수 있습니다.</p>
          </div>
        </div>
      </section>
    </main>
  </div>

  <script type="module" src="/js/app_page.js"></script>
</body>
</html>

